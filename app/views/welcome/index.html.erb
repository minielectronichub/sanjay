<!DOCTYPE html>
<html>
<head>
  <title></title>
       <meta charset="utf-8">
       <meta name="viewport" content="width=device-width, initial-scale=1.0">
       <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<style type="text/css">

.main {
     display: table;
     background-image: url('assets/k.jpg');
     background-repeat: no-repeat;
     background-size: cover;
     background-position: center;
     width: 100%;
     height: 90vh;
 } 
.cover  {
  height: 50vh;
  width: 100%;
  background: -webkit-gradient(linear, left top, left bottom, from(rgba(0,0,0,0.05)), to(rgba(0,0,0,0)));
  background: -webkit-linear-gradient(top, rgba(0,0,0,0.05) 0%, rgba(0,0,0,0) 100%);
  background: linear-gradient(to bottom, rgba(0,0,0,0.05) 0%, rgba(0,0,0,0) 100%);
  padding: 20px 0px;
  display: -webkit-box;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
  flex-direction: column;
  -webkit-box-pack: center;
  justify-content: center;
  -webkit-box-align: center;
  align-items: center;
}

.flex-form input[type="submit"] {
  background: #ef3f5a;
  border: 1px solid #ef3f5a;
  color: #fff;
  padding: 0 30px;
  cursor: pointer;
  -webkit-transition: all 0.2s;
  -moz-transition: all 0.2s;
  transition: all 0.2s;
}

.flex-form input[type="submit"]:hover {
  background: #d73851;
  border: 1px solid #d73851;
}

.flex-form {
  display: -webkit-box;
  display: flex;
  z-index: 10;
  position: relative;
  width: 314px;
  box-shadow: 4px 8px 16px rgba(0, 0, 0, 0.3);
}

.flex-form > * {
  border: 0;
  padding: 0 0 0 10px;
  background: #fff;
  line-height: 50px;
  font-size: 1rem;
  border-radius: 0;
  outline: 0;
  -webkit-appearance: none;
}

input[type="search"] {
  flex-basis: 500px;
}

#madeby {
  position: absolute;
  bottom: 0;
  right: 0;
  padding: 25px 100px;
  color: #fff;
}

@media all and (max-width:800px) {
  body {
    font-size: 0.9rem;
  }

  .flex-form {
    width: 100%;
  }

  input[type="search"] {
    flex-basis: 100%;
  }

  .flex-form > * {
    font-size: 0.9rem;
  }

  header {
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
    flex-direction: column;
    padding: 10px !important;
  }

  header h2 {
    margin-bottom: 15px;
  }

  h1 {
    font-size: 2rem;
  }

  .cover {
    padding: 20px;
  }

  #madeby {
    padding: 30px 20px;
  }
}


@media all and (max-width:360px) {
  header nav li{
    margin: 0px 0px 0px 2px;
  }

  .flex-form {
    display: -webkit-box;
    display: flex;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
    flex-direction: column;
  }

  input[type="search"] {
    flex-basis: 0;
  }

  label {
    display: none;
  }
}
</style>
<body>







<%= form_tag(root_path, method: :get, class: "flex-form") do %>
  <%= text_field_tag :title, nil, placeholder: 'search experiment' %>
<% end %>



<script>

  $(document).ready(function() {
    $('#title').on('keyup', function() {
      $('ul#experiments-container').hide();
      $('ul#experiments-container').html('');
      $.ajax({
        type: "GET",
        dataType: "json",
        url: "/",
        data: "query=" + $('#title').val(),
        success: function(response) {
          //alert(response.posts[0].title);
          for(var i = 0; i < response.experiments.length; i++) {
            $('ul#experiments-container').append(
              '<li>' + response.experiments[i].title + '</li>'
            );
          }
          $('ul#experiments-container').fadeIn();
        }
      });
    });
  });

</script>


<br><br><br>
<div id="experiments">
  <ul id="experiments-container">

  </ul>
</div>

  
  <% if user_signed_in? %>
  <section class="main">  
   <div class="cover">
    <%= form_tag search_path, method: :get, class: "flex-form" do %>
    <%= text_field_tag :title, nil, placeholder: 'Search experiment' %>
    <%= submit_tag 'submit' %>
    <% end %>
  </div> 

     
       <div class="form-labels-on-top">
        <h1> select labs </h1>
         <% Lab.all.each do |lab| %>
             <%= 'active' if params[:lab] == lab.title %>
            
             <li><%= link_to lab.title, experiments_path(lab: lab.title) %></li> 
            <% end %>
          </ul>
        </div>
  <% else %>     
    <h2>To continue please login or create a new account</h2>   

    
<% end %>
          
</section> 



</body>
</html>




